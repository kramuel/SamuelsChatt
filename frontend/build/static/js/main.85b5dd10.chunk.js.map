{"version":3,"sources":["components/Chat.js","components/Join.js","App.js","index.js"],"names":["socket","Join","useState","name","setName","room","setRoom","handleSubmit","e","preventDefault","handleLink","className","onSubmit","placeholder","type","onChange","target","value","onKeyPress","event","key","onClick","to","Chat","location","users","setUsers","messages","setMessages","message","setMessage","ENDPOINT","handleSendMessage","emit","useEffect","querystring","parse","search","io","error","alert","off","on","incMsg","console","log","href","map","msg","i","time","user","text","App","exact","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.85b5dd10.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport * as io from \"socket.io-client\";\r\nimport ScrollToBottom from \"react-scroll-to-bottom\";\r\nimport querystring from \"query-string\";\r\n\r\nimport \"./Chat.css\";\r\n\r\nlet socket;\r\n\r\n//location =property från React Router\r\nconst Chat = ({ location }) => {\r\n  const [room, setRoom] = useState(\"\");\r\n  const [users, setUsers] = useState([]);\r\n  const [messages, setMessages] = useState([]);\r\n  const [message, setMessage] = useState(\"\");\r\n  const ENDPOINT = \"192.168.10.131:5000\";\r\n\r\n  //körs när chat laddas\r\n  useEffect(() => {\r\n    //ta query-datan\r\n    const { name, room } = querystring.parse(location.search);\r\n\r\n    socket = io(ENDPOINT);\r\n\r\n    setRoom(room);\r\n\r\n    //skickar (name och room) med eventet (join) /får error från callback\r\n    socket.emit(\"join\", { name, room }, (error) => {\r\n      if (error) {\r\n        alert(error);\r\n      }\r\n    });\r\n\r\n    //unmounting/disconnect!!!\r\n    return () => {\r\n      socket.emit(\"disconnect\");\r\n\r\n      socket.off();\r\n    };\r\n  }, [ENDPOINT, location.search]);\r\n\r\n  //för att hantera inkommande meddelanden\r\n  useEffect(() => {\r\n    socket.on(\"message\", (incMsg) => {\r\n      setMessages([...messages, incMsg]); //lägger till inkommande meddelande, sist i arrayen\r\n    });\r\n    socket.on(\"roomUsers\", (users) => {\r\n      console.log(users);\r\n      setUsers(users);\r\n    });\r\n    //unsubscribar socketen från eventet(så att inte fler o fler bara skapas och sparas)\r\n    return () => {\r\n      socket.off();\r\n    };\r\n  }, [messages]);\r\n\r\n  function handleSendMessage(e) {\r\n    e.preventDefault();\r\n\r\n    //om det finns ett message\r\n    if (message) {\r\n      socket.emit(\"sendMessage\", message, () => {\r\n        setMessage(\"\"); //clear message\r\n      });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"chatBox\">\r\n      <div className=\"chatInnerBox\">\r\n        <div className=\"infoBar\">\r\n          <div className=\"infoBarLeft\">\r\n            <p>{room}</p>\r\n          </div>\r\n          <div className=\"infoBarRight\">\r\n            <a href=\"/\" className=\"exit\">\r\n              X\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div className=\"mainBox\">\r\n          <ScrollToBottom className=\"messages\">\r\n            {messages.map((msg, i) => (\r\n              <div key={i}>\r\n                <p>\r\n                &#91;{msg.time}&#93; &lt;{msg.user}&gt;: {msg.text}\r\n                </p>\r\n              </div>\r\n            ))}\r\n          </ScrollToBottom>\r\n          <div className=\"usersBox\">\r\n            {users.map((user, i) => (\r\n              <div key={i}>\r\n                <p>{user.name}</p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        <form className=\"form\">\r\n          <input\r\n            className=\"input\"\r\n            type=\"text\"\r\n            placeholder=\"Skriv ett meddelande...\"\r\n            value={message}\r\n            onChange={({ target: { value } }) => setMessage(value)}\r\n            onKeyPress={(event) =>\r\n              event.key === \"Enter\" ? handleSendMessage(event) : null\r\n            }\r\n          />\r\n          <button className=\"sendButton\" onClick={(e) => handleSendMessage(e)}>\r\n            Send\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n","import React from \"react\";\r\nimport { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport \"./Join.css\";\r\n\r\nconst Join = () => {\r\n  const [name, setName] = useState(\"\");\r\n  const [room, setRoom] = useState(\"\");\r\n\r\n  const handleNameInput = (e) => {\r\n    setName(e.target.value);\r\n  };\r\n\r\n  const handleRoomInput = (e) => {\r\n    setRoom(e.target.value);\r\n  };\r\n\r\n  const handleLink = (e) => {\r\n    if (!name || !room) {\r\n      e.preventDefault();\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    handleLink(e);\r\n  };\r\n\r\n  return (\r\n    <div className=\"joinBox\">\r\n      <div className=\"joinInnerBox\">\r\n        <h3 className=\"heading\">Samuels Chatt!</h3>\r\n        <form onSubmit={handleSubmit}>\r\n          <div>\r\n            <input\r\n              placeholder=\"Namn..\"\r\n              className=\"joinInput\"\r\n              type=\"text\"\r\n              onChange={handleNameInput}\r\n            />\r\n          </div>\r\n          <div>\r\n            <input\r\n              placeholder=\"Rum..\"\r\n              className=\"joinInput mt-20\"\r\n              type=\"text\"\r\n              onChange={handleRoomInput}\r\n              onKeyPress={(event) =>\r\n                event.key === \"Enter\" ? handleSubmit(event) : null\r\n              }\r\n            />\r\n          </div>\r\n          <Link onClick={handleSubmit} to={`/chat?name=${name}&room=${room}`}>\r\n            <button className={\"button mt-20\"} type=\"submit\">\r\n              Logga in\r\n            </button>\r\n          </Link>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Join;\r\n","import React from \"react\";\r\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\r\n\r\nimport Join from \"./components/Join\";\r\nimport Chat from \"./components/Chat\";\r\n\r\nconst App = () => {\r\n  return (\r\n    <Router>\r\n      <Route exact path=\"/\" component={Join} />\r\n      <Route path=\"/chat\" component={Chat} />\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}